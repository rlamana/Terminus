{"version":3,"sources":["webpack://Terminus/webpack/universalModuleDefinition","webpack://Terminus/webpack/bootstrap","webpack://Terminus/./ui/css/display.less","webpack://Terminus/../node_modules/css-loader/lib/css-base.js","webpack://Terminus/../node_modules/style-loader/lib/addStyles.js","webpack://Terminus/../node_modules/style-loader/lib/urls.js","webpack://Terminus/./core/events.js","webpack://Terminus/./core/promise.js","webpack://Terminus/./core/util.js","webpack://Terminus/./io/inputstream.js","webpack://Terminus/./io/outputstream.js","webpack://Terminus/./system/process.js","webpack://Terminus/./system/shell.js","webpack://Terminus/./terminus.js","webpack://Terminus/./ui/css/display.less?dcdf","webpack://Terminus/./ui/display.js","webpack://Terminus/./ui/input.js","webpack://Terminus/./ui/output.js","webpack://Terminus/./ui/outputline.js","webpack://Terminus/./ui/prompt.js","webpack://Terminus/./vendor/domready.js"],"names":["define","Events","__listeners","prototype","on","eventName","listener","scope","console","error","push","bind","emit","data","Array","slice","call","arguments","length","shift","i","apply","require","Promise","_ondone","_onerror","_onprogress","_state","_args","constructor","done","var_args","checkValid","fail","Error","progress","isCanceled","len","onDone","callback","isDone","onFail","isFailed","onProgress","then","success","cancel","isOpen","callbacks","args","setTimeout","state","Base","extend","prom","failed","parallel","promises","promise","result","queueParallel","serial","nextSequential","target","index","results","nextSecuencial","Util","String","htmlEntities","str","replace","htmlStrip","merge","array","j","indexOf","Styles","hasClass","element","className","match","RegExp","addClass","removeClass","reg","InputStream","events","_buffer","reader","join","read","_reader","func","pipe","outputstream","self","writer","OutputStream","close","value","_close","_writer","write","Process","ProcessTable","list","register","process","streams","pid","bus","_promise","toString","stdin","output","ostream","toLowerCase","exit","exec","command","Shell","commands","_environment","include","stdout","stderr","web","id","history","getEnv","key","input","group","finishQueue","_parse","forEach","futureinput","native","name","proc","search","found","Object","keys","regexp","test","concat","split","map","trim","l","clear","domready","Terminus","displaySettings","shell","document","querySelector","display","Display","_shell","_display","version","module","exports","Prompt","Input","Output","settings","$el","createElement","body","appendChild","hasOwnProperty","appendTo","prompt","editable","show","enter","historyBack","historyForward","autocomplete","_currentInput","addEventListener","e","ctrlKey","keyCode","print","welcome","showPrompt","focus","connectShell","_historyIndex","historyReset","withContent","idle","hide","_printPrompt","removeChild","copy","ps","outerHTML","innerHTML","contentEditable","preventDefault","stopPropagation","innerText","textContent","placeCursorToEnd","isVisible","style","range","selection","createRange","selectNodeContents","collapse","window","getSelection","removeAllRanges","addRange","OutputLine","content","_print","outputLine","setContent","animations","outputContent","scrollTo","scrollHeight","height","clientHeight","$ps","definition","ready","fns","fn","f","doc","testEl","documentElement","hack","doScroll","domContentLoaded","onreadystatechange","readyState","loaded","flush","removeEventListener","attachEvent","detachEvent","top"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,2BAA2B,mBAAO,CAAC,oGAAkD;AACrF;;;AAGA;AACA,cAAc,QAAS,4EAA4E,gBAAgB,2BAA2B,2BAA2B,8IAA8I,+BAA+B,yBAAyB,sBAAsB,oBAAoB,qBAAqB,0BAA0B,uBAAuB,qBAAqB,sBAAsB,kBAAkB,GAAG,sCAAsC,kBAAkB,GAAG,kCAAkC,gBAAgB,mCAAmC,gCAAgC,+BAA+B,8BAA8B,2BAA2B,wBAAwB,sBAAsB,mBAAmB,GAAG,iCAAiC,mBAAmB,kBAAkB,wBAAwB,qBAAqB,oBAAoB,mBAAmB,oBAAoB,iBAAiB,eAAe,YAAY,GAAG,8BAA8B,sBAAsB,GAAG,kCAAkC,gBAAgB,GAAG,0DAA0D,cAAc,qBAAqB,GAAG,kEAAkE,gDAAgD,wCAAwC,GAAG,+EAA+E,wCAAwC,gCAAgC,GAAG;;AAE3kD;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,wDAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;A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","file":"terminus.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Terminus\"] = factory();\n\telse\n\t\troot[\"Terminus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./terminus.js\");\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * Terminus.js\\n * Copyright © 2012 Ramón Lamana\\n */\\n.terminusjs {\\n  color: #fff;\\n  background-color: #000;\\n  font-family: monospace;\\n  /* Class to support cross-browser flexible box (specs 2009 and 2012) */\\n  /* Default stylesheet rules for input and output elements */\\n}\\n.terminusjs .terminusjs-box {\\n  display: -webkit-box;\\n  display: -moz-box;\\n  display: -o-box;\\n  display: -ms-box;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -o-flex;\\n  display: -ms-flex;\\n  display: flex;\\n}\\n.terminusjs .terminusjs-box.hidden {\\n  display: none;\\n}\\n.terminusjs .terminusjs-prompt {\\n  clear: both;\\n  -webkit-box-orient: horizontal;\\n  -moz-box-orient: horizontal;\\n  -ms-box-orient: horizontal;\\n  -o-box-orient: horizontal;\\n  -webkit-flex-flow: row;\\n  -moz-flex-flow: row;\\n  -o-flex-flow: row;\\n  flex-flow: row;\\n}\\n.terminusjs .terminusjs-input {\\n  display: block;\\n  outline: none;\\n  -webkit-box-flex: 1;\\n  -moz-box-flex: 1;\\n  -ms-box-flex: 1;\\n  -o-box-flex: 1;\\n  -webkit-flex: 1;\\n  -moz-flex: 1;\\n  -o-flex: 1;\\n  flex: 1;\\n}\\n.terminusjs .terminusjs-ps {\\n  margin-right: 5px;\\n}\\n.terminusjs .terminusjs-output {\\n  clear: both;\\n}\\n.terminusjs .terminusjs-output .terminusjs-output-line {\\n  height: 0;\\n  overflow: hidden;\\n}\\n.terminusjs .terminusjs-output .terminusjs-output-line.animate {\\n  -webkit-transition: height 0.2s ease-in-out;\\n  transition: height 0.2s ease-in-out;\\n}\\n.terminusjs .terminusjs-output .terminusjs-output-line.terminusjs-userinput {\\n  -webkit-transition: none !important;\\n  transition: none !important;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function() {\n\t'use strict';\n\n\t/**\n\t * @class\n\t */\n\tvar Events = function() {\n\t\tthis.__listeners = {};\n\t};\n\n\tEvents.prototype = {\n\t\ton: function(eventName, listener, scope) {\n\t\t\tif(!this.__listeners[eventName])\n\t\t\t\tthis.__listeners[eventName] = [];\n\n\t\t\tif (!listener)\n\t\t\t\tconsole.error('events.on(): The listener doesn\\'t exist');\n\n\t\t\tthis.__listeners[eventName].push(listener.bind(scope?scope:this));\n\t\t},\n\n\t\temit: function() {\n\t\t\tvar eventName, data = Array.prototype.slice.call(arguments);\n\n\t\t\tif (arguments.length === 0)\n\t\t\t\tconsole.error('Events.emit(): Incorrect number of parameters');\n\n\t\t\teventName = arguments[0];\n\t\t\tif(!this.__listeners[eventName])\n\t\t\t\treturn;\n\n\t\t\tdata.shift();\n\t\t\tfor(var i=this.__listeners[eventName].length; i--;)\n\t\t\t\tthis.__listeners[eventName][i].apply(null, data); // Listeners have been binded\n\t\t}\n\t};\n\n\treturn Events;\n\n});","/**\n * jsBase\n * Copyright © 2009-2012 A. Matías Quezada\n * https://github.com/amatiasq\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar slice = Array.prototype.slice;\n\n\tfunction Promise() {\n\t\tthis._ondone = [];\n\t\tthis._onerror = [];\n\t\tthis._onprogress = [];\n\t\tthis._state = 'unfulfilled';\n\t\tthis._args = null;\n\t}\n\n\tPromise.prototype = {\n\t\tconstructor: Promise,\n\n\t\tdone: function(var_args) {\n\t\t\tif (checkValid(this._state)) {\n\t\t\t\tthis._state = 'fulfilled';\n\t\t\t\tthis._args = slice.call(arguments);\n\t\t\t\tcall(this._ondone, this._args);\n\t\t\t}\n\t\t},\n\n\t\tfail: function(var_args) {\n\t\t\tif (checkValid(this._state)) {\n\t\t\t\tthis._state = 'failed';\n\t\t\t\tif (this._onerror.length === 0)\n\t\t\t\t\tthrow new Error('Promise failed without handler.');\n\t\t\t\tthis._args = slice.call(arguments);\n\t\t\t\tcall(this._onerror, this._args);\n\t\t\t}\n\t\t},\n\n\t\tprogress: function(var_args) {\n\t\t\tif (this.isCanceled())\n\t\t\t\treturn;\n\n\t\t\tfor (var i = 0, len = this._onprogress.length; i < len; i++)\n\t\t\t\tthis._onprogress[i].apply(null, arguments);\n\t\t},\n\n\t\tonDone: function(callback) {\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\tif (this.isDone())\n\t\t\t\t\tcall(callback, this._args);\n\t\t\t\telse\n\t\t\t\t\tthis._ondone.push(callback);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tonFail: function(callback) {\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\tif (this.isFailed())\n\t\t\t\t\tcall(callback, this._args);\n\t\t\t\telse\n\t\t\t\t\tthis._onerror.push(callback);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tonProgress: function(callback) {\n\t\t\tif (typeof callback == 'function')\n\t\t\t\tthis._onprogress.push(callback);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tthen: function(success, fail, progress) {\n\t\t\tthis.onDone(success);\n\t\t\tthis.onFail(fail);\n\t\t\tthis.onProgress(progress);\n\t\t\treturn this;\n\t\t},\n\n\t\tcancel: function() {\n\t\t\tthis._state = 'canceled';\n\t\t},\n\n\t\tisCanceled: function() {\n\t\t\treturn this._state === 'canceled';\n\t\t},\n\n\t\tisDone: function() {\n\t\t\treturn this._state === 'fulfilled';\n\t\t},\n\n\t\tisFailed: function() {\n\t\t\treturn this._state === 'failed';\n\t\t},\n\n\t\tisOpen: function() {\n\t\t\treturn this._state === 'unfulfilled';\n\t\t}\n\n\t};\n\n\tfunction call(callbacks, args) {\n\t\tsetTimeout(function() {\n\t\t\tif (typeof callbacks === 'function')\n\t\t\t\treturn callbacks.apply(null, args);\n\n\t\t\tfor (var i = 0, len = callbacks.length; i < len; i++)\n\t\t\t\tcallbacks[i].apply(null, args);\n\t\t}, 0);\n\t}\n\n\tfunction checkValid(state) {\n\t\tswitch (state) {\n\t\t\tcase 'unfulfilled':\n\t\t\t\treturn true;\n\t\t\tcase 'canceled':\n\t\t\t\treturn false;\n\t\t\tcase 'fulfilled':\n\t\t\t\tthrow new Error('Promise is done')\n\t\t\tcase 'failed':\n\t\t\t\tthrow new Error('Promise is failed');\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Invalid promise state ' + state);\n\t\t}\n\t}\n\n\tif (typeof Base === 'function')\n\t\tPromise = Base.extend(Promise.prototype);\n\n\tPromise.done = function() {\n\t\tvar prom = new Promise();\n\t\tprom.done.apply(prom, arguments);\n\t\treturn prom;\n\t};\n\tPromise.failed = function() {\n\t\tvar prom = new Promise();\n\t\tprom.fail.apply(prom, arguments);\n\t\treturn prom;\n\t};\n\tPromise.parallel = function(promises) {\n\t\tvar promise = new Promise();\n\t\tvar result = [];\n\t\tvar done = [];\n\n\t\tif (arguments.length > 1)\n\t\t\tpromises = slice.call(arguments);\n\n\t\tvar len = done.length = promises.length;\n\t\tif (len === 0)\n\t\t\treturn Promise.done();\n\n\t\tfor (var i = 0; i < len; i++)\n\t\t\tqueueParallel(promise, promises[i], i, done, result);\n\n\t\treturn promise;\n\t};\n\tPromise.serial = function(callbacks) {\n\t\tvar promise = new Promise();\n\t\tif (arguments.length > 1)\n\t\t\tcallbacks = slice.call(arguments);\n\n\t\tif (callbacks.length === 0)\n\t\t\treturn Promise.done();\n\n\t\tnextSequential(promise, callbacks, 0, [])\n\t\treturn promise;\n\t};\n\n\tfunction queueParallel(prom, target, index, done, results) {\n\t\ttarget.then(function() {\n\n\t\t\tdone[index] = true;\n\t\t\tresults[index] = slice.call(arguments);\n\n\t\t\tif (!prom.isOpen())\n\t\t\t\treturn;\n\n\t\t\tfor (var i = done.length; i--; )\n\t\t\t\tif (!done[i])\n\t\t\t\t\treturn;\n\n\t\t\tprom.done.apply(prom, results);\n\n\t\t}, function() {\n\t\t\tif (prom.isOpen())\n\t\t\t\tprom.fail.apply(prom, arguments);\n\t\t});\n\t}\n\n\tfunction nextSequential(prom, callbacks, index, args) {\n\t\tif (index === callbacks.length)\n\t\t\treturn prom.done.apply(prom, args);\n\n\t\tvar result = callbacks[index].apply(null, args);\n\n\t\tif (!(result instanceof Promise)) {\n\t\t\tnextSecuencial(prom, callbacks, index + 1, [result]);\n\t\t} else {\n\t\t\tresult.then(function() {\n\t\t\t\tnextSecuencial(prom, callbacks, index + 1, arguments);\n\t\t\t}, function(args) {\n\t\t\t\tprom.fail.apply(prom, arguments);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn Promise;\n});","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function() {\n\n\t'use strict';\n\n\t/**\n\t * @singleton\n\t */\n\tvar Util = {\n\t\tString: {\n\t\t\thtmlEntities: function (str) {\n\t\t\t\treturn String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;')\n\t\t\t\t\t.replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\t\t\t},\n\n\t\t\thtmlStrip: function (str) {\n\t\t\t\treturn String(str).replace(/&/g, '').replace(/</g, '&lt;')\n\t\t\t\t\t.replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\t\t\t},\n\t\t},\n\n\t\tArray: {\n\t\t\tmerge: function(/* variable number of arrays */){\n\t\t\t\tvar result = [];\n\t\t\t    for(var i = 0; i < arguments.length; i++){\n\t\t\t        var array = arguments[i];\n\t\t\t        for(var j = 0; j < array.length; j++){\n\t\t\t            if(result.indexOf(array[j]) === -1) {\n\t\t\t                result.push(array[j]);\n\t\t\t            }\n\t\t\t        }\n\t\t\t    }\n\t\t\t    return result;\n\t\t\t}\n\t\t},\n\n\t\tStyles: {\n\t\t\thasClass: function (element, className) {\n\t\t\t\treturn element.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'));\n\t\t\t},\n\n\t\t\taddClass: function(element, className) {\n\t\t\t\tif (!this.hasClass(element, className))\n\t\t\t\t\telement.className += ' ' + className;\n\t\t\t},\n\n\t\t\tremoveClass: function(element, className) {\n\t\t\t\tif (this.hasClass(element, className)) {\n\t\t\t\t\tvar reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n\t\t\t\t\telement.className = element.className.replace(reg,' ');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn Util;\n});","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Promise = require('core/promise');\n\tvar Events = require('core/events');\n\n\t/**\n\t * @class\n\t */\n\tvar InputStream = function() {\n\t\tthis.events = new Events();\n\t\tthis._buffer = [];\n\n\t\t// Default reader function\n\t\tthis.reader = function(promise) {\n\t\t\tvar data = this._buffer.join('');\n\t\t\tthis._buffer = [];\n\t\t\tpromise.done(data);\n\t\t};\n\t};\n\n\tInputStream.prototype = {\n\t\tevents: null,\n\n\t\t/**\n\t\t * @return {Promise}\n\t\t */\n\t\tread: function() {\n\t\t\tvar promise = new Promise();\n\n\t\t\t// Call reader function\n\t\t\tthis._reader.call(this, promise);\n\t\t\tthis.events.emit('read');\n\n\t\t\treturn promise;\n\t\t},\n\n\t\t/**\n\t\t * Set reader function.\n\t\t * This function receives promise.\n\t\t *    function(promise){}\n\t\t */\n\t\tset reader(func) {\n\t\t\tthis._reader = func;\n\t\t},\n\n\t\tget reader() {\n\t\t\treturn this._reader;\n\t\t},\n\n\t\t/**\n\t\t * Connects an output stream with this input stream\n\t\t */\n\t\tpipe: function(outputstream) {\n\t\t\tvar self = this;\n\t\t\toutputstream.writer = function(data) {\n\t\t\t\tself._buffer.push(data);\n\t\t\t};\n\n\t\t\treturn this;\n\t\t}\n\t};\n\n\treturn InputStream;\n\n});","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Events = require('core/events');\n\n\t/**\n\t * @class\n\t */\n\tvar OutputStream = function() {\n\t\tthis.events = new Events();\n\t\tthis.close = false;\n\n\t\tthis._buffer = [];\n\n\t\t// Default writer\n\t\tthis.writer = function(data) {\n\t\t\tthis._buffer.push(data);\n\t\t};\n\t};\n\n\tOutputStream.prototype = {\n\t\tevents: null,\n\n\t\t/**\n\t\t * @property {bool} close\n\t\t */\n\t\tset close(value) {\n\t\t\t// Cannot be reopened\n\t\t\tif(this._close) return;\n\n\t\t\tif(value === true)\n\t\t\t\tthis.events.emit('close');\n\n\t\t\tthis._close = !!value;\n\t\t},\n\n\t\tget close() {\n\t\t\treturn this._close;\n\t\t},\n\n\t\t/**\n\t\t * Set writer function.\n\t\t * The function will receive data to write.\n\t\t *    function(data){}\n\t\t */\n\t\tset writer(func) {\n\t\t\tthis._writer = func;\n\t\t},\n\n\t\tget writer() {\n\t\t\treturn this._writer;\n\t\t},\n\n\t\t/**\n\t\t * Writes the content of output to the stream.\n\t\t * @param {String} output\n\t\t */\n\t\twrite: function(data) {\n\t\t\tif(this.close) return;\n\n\t\t\tdata += ''; // Stringify output\n\t\t\tthis.events.emit('write', data);\n\t\t\tthis._writer.call(this, data);\n\t\t}\n\t};\n\n\treturn OutputStream;\n});","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Process;\n\tvar Events = require('core/events');\n\tvar Promise = require('core/promise');\n\n\tvar OutputStream = require('io/outputstream');\n\n\t/**\n\t * @private\n\t */\n\tvar ProcessTable = {\n\t\tlist: [],\n\n\t\tregister: function(process) {\n\t\t\tif(!(process instanceof Process))\n\t\t\t\tconsole.error('Trying to register a non Process object');\n\n\t\t\tthis.list.push(process);\n\t\t\treturn this.list.length - 1;\n\t\t}\n\t};\n\n\t/**\n\t * @class\n\t */\n\tProcess = function(streams) {\n\t\tthis.pid = ProcessTable.register(this);\n\t\tthis.events = new Events;\n\t\tthis.streams = streams;\n\t\tthis.bus = Process.bus;\n\n\t\tthis._promise = new Promise();\n\t};\n\n\t/**\n\t * Global process bus\n\t */\n\tProcess.bus = new Events;\n\n\tProcess.prototype = {\n\t\tpid: null,\n\t\tbus: null,\n\n\t\t_promise: null,\n\n\t\ttoString: function() {\n\t\t\treturn '[Process:' + this.pid + ']';\n\t\t},\n\n\t\tread: function() {\n\t\t\treturn this.streams.stdin.read();\n\t\t},\n\n\t\t/**\n\t\t * @param {String} output\n\t\t * @param {String|OutputStream} target Output stream or the standard output values: 'stdout', 'stderr' or 'web'.\n\t\t */\n\t\twrite: function(output, target) {\n\t\t\tvar ostream;\n\n\t\t\ttarget = target || 'stdout';\n\n\t\t\tif (typeof target === 'string')\n\t\t\t\ttarget = target.toLowerCase();\n\n\t\t\tif(target instanceof OutputStream)\n\t\t\t\tostream = target;\n\t\t\telse if(target !== 'stdin')\n\t\t\t\tostream = this.streams[target];\n\n\t\t\tif(!ostream) {\n\t\t\t\tconsole.error(this.toString() + ' Method write(): The target \\''+ target +'\\' is not a valid stream');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tostream.write(output);\n\t\t},\n\n\t\texit: function(value) {\n\t\t\tthis._promise.done(value);\n\t\t},\n\n\t\t/**\n\t\t * Execute the command in the process context. That is\n\t\t * calls the function passed as a parametes with this process\n\t\t * as scope.\n\t\t * @return {Promise}\n\t\t */\n\t\texec: function(command, args) {\n\t\t\tif(typeof command !== 'function') {\n\t\t\t\tconsole.error(this.toString + ': Could not execute process ' +\n\t\t\t\t\t'because the given command is not a function');\n\t\t\t\tthis.exit(1);\n\t\t\t}\n\n\t\t\tcommand.apply(this, args);\n\t\t\treturn this._promise;\n\t\t}\n\t};\n\n\treturn Process;\n\n});\n","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Util = require('core/util');\n\tvar Promise = require('core/promise');\n\n\tvar Process = require('system/process');\n\tvar InputStream = require('io/inputstream');\n\tvar OutputStream = require('io/outputstream');\n\n\t/**\n\t * @class\n\t */\n\tvar Shell = function(commands) {\n\t\tthis._environment = {};\n\n\t\tif(commands)\n\t\t\tthis.include(commands);\n\n\t\t// Create Standard Streams\n\t\tthis.streams = {\n\t\t\tstdin: new InputStream(),\n\t\t\tstdout: new OutputStream(),\n\t\t\tstderr: new OutputStream(),\n\t\t\tweb: new OutputStream()\n\t\t};\n\n\t\t// Global process bus\n\t\tthis.bus = Process.bus;\n\n\t\t// Debug purposes\n\t\tthis.streams.stdin.id = 'STDIN';\n\t\tthis.streams.stdout.id = 'STDOUT';\n\n\t\tthis.commands = [];\n\t\tthis.history = [];\n\t};\n\n\tShell.prototype = {\n\t\tcommands: null,\n\t\tstreams: null,\n\t\tbus: null,\n\t\thistory: null,\n\n\t\t_environment: null,\n\n\t\tgetEnv: function(key) {\n\t\t\treturn this._environment[key] ? this._environment[key] : null;\n\t\t},\n\n\t\texec: function(input) {\n\t\t\tvar group, commands,\n\t\t\t\tfinishQueue = [];\n\n\t\t\tvar streams = {\n\t\t\t\tstdin: this.streams.stdin,\n\t\t\t\tstdout: this.streams.stdout,\n\t\t\t\tstderr: this.streams.stderr,\n\t\t\t\tweb: this.streams.web\n\t\t\t};\n\n\t\t\tthis.history.push(input);\n\n\t\t\tcommands = this._parse(input);\n\t\t\tcommands.forEach(function(command, index) {\n\t\t\t\tvar promise, futureinput;\n\n\t\t\t\t// Setup processes streams\n\t\t\t\tif(index < commands.length-1) {\n\t\t\t\t\tstreams.stdout = new OutputStream();\n\t\t\t\t\tfutureinput = (new InputStream()).pipe(streams.stdout);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tstreams.stdout = this.streams.stdout;\n\t\t\t\t\tfutureinput = null;\n\t\t\t\t}\n\n\t\t\t\tpromise = (function(streams) {\n\t\t\t\t\t// Execute first shell native commands\n\t\t\t\t\tif (this.native[command.name]) {\n\t\t\t\t\t\tthis.native[command.name].apply(this, command.args);\n\t\t\t\t\t\treturn Promise.done();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Search command in commander stack\n\t\t\t\t\t\tfor(var i = this.commands.length; i--;) {\n\t\t\t\t\t\t\tgroup = this.commands[i];\n\t\t\t\t\t\t\tif (group[command.name]) {\n\t\t\t\t\t\t\t\tvar proc = new Process(streams);\n\t\t\t\t\t\t\t\treturn proc.exec(group[command.name], command.args);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.streams.stderr.write('Command \\''+command.name+'\\' not found.');\n\t\t\t\t\treturn Promise.done();\n\t\t\t\t})\n\t\t\t\t.call(this, streams);\n\n\t\t\t\t// Setup input stream for next process\n\t\t\t\tif(futureinput)\n\t\t\t\t\tstreams.stdin = futureinput;\n\n\t\t\t\tfinishQueue.push(promise);\n\t\t\t},\n\t\t\tthis);\n\n\t\t\treturn Promise.parallel(finishQueue);\n\t\t},\n\n\t\tsearch: function(key) {\n\t\t\tvar found = [], commands = [];\n\n\t\t\tfor(var i = this.commands.length; i--;)\n\t\t\t\tcommands = Util.Array.merge(commands, Object.keys(this.commands[i]));\n\n\t\t\tvar regexp = new RegExp('^'+key, 'i');\n\n\t\t\t// Proposal only for commands not for arguments\n\t\t\t//if(arguments.length <= 1) {\n\t\t\tfor (var j = commands.length; j--;) {\n\t\t\t\tif (regexp.test(commands[j])) {\n\t\t\t\t\tfound.push(commands[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t//}\n\t\t\t// @todo proposal for arguments asking the commander. Adding else here.\n\n\t\t\treturn found;\n\t\t},\n\n\t\t/**\n\t\t * Attaches a group of commands\n\t\t * @param {Array} List of commands\n\t\t */\n\t\tinclude: function(commands) {\n\t\t\tthis.commands = this.commands.concat(commands);\n\t\t},\n\n\t\t/**\n\t\t * Parse input string to get commands and args\n\t\t * @return An array of {command, args} objects\n\t\t */\n\t\t_parse: function(input) {\n\t\t\tvar commands = input.split('|');\n\n\t\t\treturn commands.map(function(command) {\n\t\t\t\tvar args = command.trim().split(' ');\n\t\t\t\tcommand = args[0];\n\t\t\t\targs.shift();\n\t\t\t\treturn {\n\t\t\t\t\tname: command,\n\t\t\t\t\targs: args\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Shell native commands\n\t\t */\n\t\tnative: {\n\t\t\thistory: function() {\n\t\t\t\tvar output = '';\n\t\t\t\tfor(var i=0, l=this.history.length; i<l; i++)\n\t\t\t\t\toutput += ' ' + i + ': ' + this.history[i] + '\\n';\n\n\t\t\t\tthis.streams.stdout.write(output);\n\t\t\t},\n\n\t\t\tclear: function() {\n\t\t\t\tthis.bus.emit('clear');\n\t\t\t}\n\t\t}\n\t};\n\n\treturn Shell;\n});\n\n\n\n\n","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\nvar domready = require('vendor/domready');\n\n/**\n * Helper that creates a terminal with a default display and shell.\n *\n * @param {String|Element} DOM element or selector where display will be rendered\n * @param {Object} displaySettings Optional display parameters\n * @constructor\n */\nvar Terminus = function(element, displaySettings) {\n\tvar self = this;\n\n\t// Setup shell\n\tthis.shell = displaySettings.shell || (new Terminus.Shell());\n\tif(!this.shell || !(this.shell instanceof Terminus.Shell)) {\n\t\tconsole.error('Terminus.constructor: Provided shell not valid');\n\t\treturn;\n\t}\n\tdisplaySettings.shell = this.shell;\n\n\t// Setup display\n\tdomready(function(){\n\t\telement = (typeof element === 'string') ?\n\t\t\tdocument.querySelector(element) :\n\t\t\telement;\n\n\t\tself.display = new Terminus.Display(element, displaySettings);\n\t});\n};\n\nTerminus.prototype = {\n\t/**\n\t * @property {Terminus.Shell} shell\n\t * @readonly\n\t */\n\tset shell(value) {\n\t\tif(!this._shell)\n\t\t\tthis._shell = value;\n\t},\n\n\tget shell() {\n\t\treturn this._shell;\n\t},\n\n\t/**\n\t * @property {Terminus.Display} display\n\t * @readonly\n\t */\n\tset display(value) {\n\t\tif(!this._display)\n\t\t\tthis._display = value;\n\t},\n\n\tget display() {\n\t\treturn this._display;\n\t}\n};\n\nTerminus.version = '0.7.0';\n\nTerminus.Display = require('ui/display');\nTerminus.Shell = require('system/shell');\nTerminus.Process = require('system/process');\n\nmodule.exports = Terminus;\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-3!./display.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-3!./display.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-3!./display.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Events = require('core/events');\n\tvar Promise = require('core/promise');\n\tvar Util = require('core/util');\n\n\tvar Prompt = require('ui/prompt');\n\tvar Input = require('ui/input');\n\tvar Output = require('ui/output');\n\n\trequire('./css/display.less');\n\n\t/**\n\t * Widget\n\t */\n\tvar Display = function(element, settings) {\n\t\tvar self = this;\n\n\t\t// Create the DOM element and append to body\n\t\tif(!element) {\n\t\t\tthis.$el = document.createElement('div');\n\t\t\tdocument.body.appendChild(this.$el);\n\t\t}\n\n\t\t// Events support\n\t\tthis.events = new Events();\n\n\t\t// Load settings\n\t\tfor(var key in settings) {\n\t\t\tif (settings.hasOwnProperty(key))\n\t\t\t\tthis.settings[key] = settings[key];\n\t\t}\n\n\t\t// Create DOM elements structure\n\t\tthis.$el = element;\n\t\tUtil.Styles.addClass(this.$el, 'terminusjs');\n\n\t\t// Create DOM output element\n\t\tthis.output = new Output();\n\t\tthis.output.appendTo(this.$el);\n\n\t\t// Create DOM prompt element\n\t\tthis.prompt = new Prompt({\n\t\t\teditable: true\n\t\t});\n\t\tthis.prompt.appendTo(this.$el).show();\n\n\t\tthis.prompt.events.on('enter', this.enter, this);\n\t\tthis.prompt.events.on('historyBack', this.historyBack, this);\n\t\tthis.prompt.events.on('historyForward', this.historyForward, this);\n\t\tthis.prompt.events.on('autocomplete', this.autocomplete, this);\n\t\tthis.prompt.events.on('focus', function(){\n\t\t\t// When a key event, always scroll to bottom\n\t\t\t//window.scrollTo(0, document.body.scrollHeight);\n\t\t}, this);\n\n\t\tthis._currentInput = this.prompt.input;\n\n\t\t// CTRL + Z support\n\t\tthis.$el.addEventListener('keydown', function(e) {\n\t\t\tif(e.ctrlKey && e.keyCode === 90) {\n\t\t\t\tself.cancel();\n\t\t\t}\n\t\t});\n\n\t\tthis.output.print(this.settings.welcome, 'web');\n\t\tthis.showPrompt();\n\n\t\telement.addEventListener('click', function(){\n\t\t\tself.focus();\n\t\t});\n\n\t\tif (!!this.settings.shell)\n\t\t\tthis.connectShell(this.settings.shell);\n\n\t\tthis._historyIndex = 0;\n\t};\n\n\tDisplay.prototype = {\n\t\t_shell: null,\n\t\t_historyIndex: 0,\n\t\t_currentInput: null,\n\n\t\tsettings: {\n\t\t\twelcome: '<p>Terminus.js<br/>Copyright 2011-2013 Ramón Lamana.</p>'\n\t\t},\n\n\t\tfocus: function(){\n\t\t\tthis._currentInput.focus();\n\t\t},\n\n\t\thistoryReset: function() {\n\t\t\tthis._historyIndex = this._shell.history.length;\n\t\t},\n\n\t\thistoryBack: function() {\n\t\t\tthis._historyIndex--;\n\t\t\tvar command = this._shell.history[this._historyIndex];\n\n\t\t\tif (command)\n\t\t\t\tthis.prompt.input.value = command;\n\t\t\telse\n\t\t\t\tthis._historyIndex = 0;\n\t\t},\n\n\t\thistoryForward: function() {\n\t\t\tthis._historyIndex++;\n\t\t\tvar command = this._shell.history[this._historyIndex];\n\n\t\t\tif (command)\n\t\t\t\tthis.prompt.input.value = command;\n\t\t\telse\n\t\t\t\tthis.historyReset();\n\t\t},\n\n\t\tshowPrompt: function(withContent) {\n\t\t\tthis.prompt.input.clear();\n\n\t\t\tif(typeof withContent !== 'undefined')\n\t\t\t\tthis.prompt.input.value = withContent;\n\n\t\t\tthis.prompt.show();\n\t\t\tthis.prompt.input.focus();\n\n\t\t\tthis.events.emit('prompt');\n\t\t},\n\n\t\tidle: function() {\n\t\t\tthis.prompt.hide();\n\t\t\tthis.$el.focus();\n\t\t},\n\n\t\tcancel: function() {\n\t\t\tthis.prompt.show();\n\t\t\tthis._currentInput = this.prompt.input;\n\t\t\tthis.focus();\n\t\t},\n\n\t\tenter: function(input) {\n\t\t\tvar command = input.value,\n\t\t\t\tpromise = new Promise(),\n\t\t\t\tself = this;\n\n\t\t\t// Show command entered in output and hide\n\t\t\t// prompt waiting for next read operation\n\t\t\tthis._printPrompt();\n\t\t\tthis.idle();\n\n\t\t\t// When promise is done, put back prompt\n\t\t\tpromise.then(function() {\n\t\t\t\tself.showPrompt();\n\t\t\t});\n\n\t\t\tif(command === '') {\n\t\t\t\tpromise.done();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!!this._shell) {\n\t\t\t\t// Execute Command\n\t\t\t\tthis._shell.exec(command).then(function(){\n\t\t\t\t\tpromise.done();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.historyReset();\n\t\t},\n\n\t\tautocomplete: function(input) {\n\t\t\tvar commands = this._shell.search(input.value);\n\n\t\t\tif(commands.length > 1) {\n\t\t\t\tthis._printPrompt();\n\t\t\t\tthis.output.print(commands.join(' '), 'stdout');\n\t\t\t\tthis.showPrompt(input.value);\n\t\t\t}\n\t\t\telse if(commands.length === 1) {\n\t\t\t\tthis.showPrompt(commands[0]);\n\t\t\t}\n\t\t},\n\n\t\tconnectShell: function (shell) {\n\t\t\tvar streams = shell.streams;\n\t\t\tthis._shell = shell;\n\n\t\t\t// Listen to its output streams\n\t\t\tstreams.stdout.events.on('write', function(data){\n\t\t\t\tthis.output.print(data, 'stdout');\n\t\t\t}, this);\n\n\t\t\tstreams.stderr.events.on('write', function(data){\n\t\t\t\tthis.output.print(data, 'stderr');\n\t\t\t}, this);\n\n\t\t\tstreams.web.events.on('write', function(data){\n\t\t\t\tthis.output.print(data, 'web');\n\t\t\t}, this);\n\n\t\t\t// Listen to other events on shell\n\t\t\tthis._shell.bus.on('clear', this.output.clear, this.output);\n\n\t\t\t// Listen to input events\n\t\t\tstreams.stdin.reader = this.reader.bind(this);\n\n\t\t\tthis.historyReset();\n\t\t},\n\n\t\treader: function(promise) {\n\t\t\tvar /*stdin = this._shell.streams.stdin,*/\n\t\t\t\tinput = new Input({\n\t\t\t\t\teditable: true\n\t\t\t\t});\n\n\t\t\tthis._currentInput = input;\n\t\t\tinput.appendTo(this.$el).focus();\n\n\t\t\tinput.events.on('enter', function(input) {\n\t\t\t\tvar /*stream = new OutputStream(),*/\n\t\t\t\t\tdata = input.value;\n\n\t\t\t\tpromise.done(data);\n\n\t\t\t\t// Print out the input data\n\t\t\t\tthis.output.print(data);\n\n\t\t\t\t// Restore input to the old prompt\n\t\t\t\tinput.editable = false;\n\t\t\t\tthis.$el.removeChild(input.$el);\n\t\t\t\tthis._currentInput = this.prompt.input;\n\t\t\t}, this);\n\t\t},\n\n\t\t_printPrompt: function() {\n\t\t\tvar copy = new Prompt();\n\t\t\tcopy.ps = this.prompt.ps;\n\t\t\tcopy.input.value = this.prompt.input.value;\n\t\t\tcopy.show();\n\n\t\t\tthis.output.print(copy.$el.outerHTML, 'web');\n\t\t}\n\t};\n\n\treturn Display;\n});\n","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Events = require('core/events');\n\tvar Util = require('core/util');\n\n\t/**\n\t * Client Input class\n\t * @class\n\t */\n\tvar Input = function(settings) {\n\t\tvar self = this;\n\n\t\tthis.settings = {\n\t\t\teditable: false\n\t\t};\n\n\t\tfor(var key in settings) {\n\t\t\tif (settings.hasOwnProperty(key))\n\t\t\t\tthis.settings[key] = settings[key];\n\t\t}\n\n\t\t// Events support\n\t\tthis.events = new Events();\n\n\t\t// DOM elements structure\n\t\tthis.$el = document.createElement('div');\n\t\tthis.$el.className = 'terminusjs-input';\n\t\tthis.$el.innerHTML = '';\n\n\t\tif(!!this.settings.editable) {\n\t\t\tthis.$el.contentEditable = true;\n\t\t\tthis.$el.addEventListener('keydown', function(e) {\n\t\t\t\tswitch(e.keyCode) {\n\t\t\t\tcase 13: // Enter key\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tself.events.emit('enter', self);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tInput.prototype = {\n\t\tget value() {\n\t\t\tvar input = this.$el.innerText || this.$el.textContent;\n\t\t\tvar value = input ? input.replace(/\\n/g, '') : '';\n\t\t\tvalue = value.replace(/^\\s+|\\s+$/g, '');\n\t\t\treturn value;\n\t\t},\n\n\t\tset value(value) {\n\t\t\tthis.$el.innerHTML = value;\n\t\t\tthis.focus();\n\t\t\treturn this;\n\t\t},\n\n\t\tset editable(value) {\n\t\t\tvalue = !!value;\n\t\t\tthis.settings.editable = value;\n\t\t\tthis.$el.contentEditable = value;\n\t\t},\n\n\t\tget editable() {\n\t\t\treturn this.settings.editable;\n\t\t},\n\n\t\tappendTo: function(element) {\n\t\t\telement.appendChild(this.$el);\n\t\t\treturn this;\n\t\t},\n\n\t\tfocus: function () {\n\t\t\tthis.$el.focus();\n\t\t\tthis.placeCursorToEnd();\n\n\t\t\tthis.events.emit('focus', this);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tclear: function() {\n\t\t\tthis.value = '';\n\t\t\treturn this;\n\t\t},\n\n\t\tisVisible: function() {\n\t\t\treturn (this.$el.style.display !== 'none') && Util.Styles.hasClass(this.$el, 'terminusjs-box');\n\t\t},\n\n\t\tplaceCursorToEnd: function() {\n\t\t\tvar range, selection;\n\t\t    if(document.createRange) { // Firefox, Chrome, Opera, Safari, IE 9+\n\t\t        range = document.createRange();\n\t\t        range.selectNodeContents(this.$el);\n\t\t        range.collapse(false);\n\t\t        selection = window.getSelection();\n\t\t        selection.removeAllRanges();\n\t\t        selection.addRange(range);\n\t\t    }\n\n\t\t    return this;\n\t\t}\n\t};\n\n\treturn Input;\n});\n","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Util = require('core/util');\n\n\tvar OutputLine = require('ui/outputline');\n\n\t/**\n\t * Client Output class\n\t * @class\n\t */\n\tvar Output = function() {\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = 'terminusjs-output';\n\t};\n\n\tOutput.prototype = {\n\t\t/**\n\t\t * @param {String} target The output target: 'stdout', 'stderr', 'web'.\n\t\t * @param {String} content Output content to be printed.\n\t\t * @return {ClientOutput} Itself to call in cascade.\n\t\t */\n\t\tprint: function(content, target) {\n\t\t\tvar output;\n\t\t\ttarget = target || 'stdout';\n\t\t\tswitch(target) {\n\t\t\tcase 'stdout':\n\t\t\t\toutput = this._print(Util.String.htmlEntities(content).replace(/\\n/g, '<br/>'), 'terminusjs-stdout');\n\t\t\t\tbreak;\n\t\t\tcase 'stderr':\n\t\t\t\toutput = this._print(Util.String.htmlEntities(content).replace(/\\n/g, '<br/>'), 'terminusjs-stderr');\n\t\t\t\tbreak;\n\t\t\tcase 'web':\n\t\t\t\toutput = this._print(content, 'terminusjs-web');\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\toutput.show();\n\t\t\treturn this;\n\t\t},\n\n\t\tclear: function() {\n\t\t\tthis.element.innerHTML = '';\n\t\t},\n\n\t\tappendTo: function(element) {\n\t\t\telement.appendChild(this.element);\n\t\t\treturn this;\n\t\t},\n\n\t\t_print: function(content, className) {\n\t\t\tvar outputLine = new OutputLine(className);\n\t\t\toutputLine.appendTo(this.element);\n\t\t\toutputLine.setContent(content);\n\t\t\treturn outputLine;\n\t\t}\n\t};\n\n\treturn Output;\n});","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Util = require('core/util');\n\n\tvar animations = false;\n\n\t/**\n\t * Client OutputLine class.\n\t * Represents a line output element in the whole output stream.\n\t * @class\n\t */\n\tvar OutputLine = function() {\n\t\tvar outputContent, outputLine = this.element = document.createElement('div');\n\t\toutputLine.className = 'terminusjs-output-line';\n\t\tUtil.Styles.addClass(outputLine, 'animate');\n\n\t\toutputContent = this.outputContent = document.createElement('div');\n\t\toutputContent.className = 'terminusjs-output-content';\n\t\toutputLine.appendChild(outputContent);\n\n\t\t// When new output is generated, always scroll to bottom\n\t\twindow.scrollTo(0,document.body.scrollHeight);\n\t};\n\n\tOutputLine.prototype = {\n\t\telement: null,\n\t\toutputContent: null,\n\n\t\tappendTo: function(element) {\n\t\t\telement.appendChild(this.element);\n\t\t\treturn this;\n\t\t},\n\n\t\tsetContent: function(content) {\n\t\t\tthis.outputContent.innerHTML = content;\n\t\t},\n\n\t\tshow: function() {\n\t\t\tvar self = this;\n\n\t\t\tvar func = function() {\n\t\t\t\tUtil.Styles.addClass(self.element, 'visible');\n\t\t\t\tself.element.style.height = animations ? self.outputContent.clientHeight + 'px' : 'auto';\n\t\t\t};\n\n\t\t\tif(animations)\n\t\t\t\tsetTimeout(func, 30);\n\t\t\telse\n\t\t\t\tfunc.call(this);\n\t\t},\n\n\t\thide: function() {\n\t\t\tUtil.Styles.removeClass(this.element, 'visible');\n\t\t\tthis.element.style.height = '0';\n\t\t}\n\t};\n\n\treturn OutputLine;\n});","/**\n * Terminus.js\n * Copyright © 2012 Ramón Lamana\n */\ndefine(function(require) {\n\n\t'use strict';\n\n\tvar Events = require('core/events');\n\tvar Util = require('core/util');\n\n\tvar Input = require('ui/input');\n\n\t/**\n\t * Prompt input class\n\t * @class\n\t */\n\tvar Prompt = function(settings) {\n\t\tvar self = this;\n\n\t\tthis.settings = {\n\t\t\teditable: false,\n\t\t\tps: '>'\n\t\t};\n\n\t\tfor(var key in settings) {\n\t\t\tif (settings.hasOwnProperty(key)) {\n\t\t\t\tthis.settings[key] = settings[key];\n\t\t\t}\n\t\t}\n\n\t\t// Events support\n\t\tthis.events = new Events();\n\n\t\t// DOM elements structure\n\t\tthis.$el = document.createElement('div');\n\t\tthis.$el.className = 'terminusjs-prompt';\n\t\tthis.$el.className += ' terminusjs-box';\n\n\t\tthis.$ps = document.createElement('div');\n\t\tthis.$ps.className = 'terminusjs-ps';\n\t\tthis.$el.appendChild(this.$ps);\n\n\t\t// Input element\n\t\tthis.input = new Input(settings);\n\t\tthis.input.appendTo(this.$el);\n\n\t\tif(!!this.settings.editable) {\n\t\t\tthis.input.$el.addEventListener('keydown', function(e) {\n\t\t\t\tswitch(e.keyCode) {\n\t\t\t\tcase 13: // Enter key\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tself.events.emit('enter', self.input);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 38: // Up key\n\t\t\t\t\tself.events.emit('historyBack', self.input);\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 40: // Down key\n\t\t\t\t\tself.events.emit('historyForward', self.input);\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 9: // Tab key\n\t\t\t\t\tself.events.emit('autocomplete', self.input);\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.ps = this.settings.ps;\n\t};\n\n\tPrompt.prototype = {\n\t\tset ps(value) {\n\t\t\tthis.settings.prompt = value;\n\t\t\tthis.$ps.innerHTML = value;\n\t\t\treturn this;\n\t\t},\n\n\t\tget ps() {\n\t\t\treturn this.settings.prompt;\n\t\t},\n\n\t\tappendTo: function(element) {\n\t\t\telement.appendChild(this.$el);\n\t\t\treturn this;\n\t\t},\n\n\t\tshow: function () {\n\t\t\tUtil.Styles.removeClass(this.$el, 'hidden');\n\t\t\treturn this;\n\t\t},\n\n\t\thide: function () {\n\t\t\tUtil.Styles.addClass(this.$el, 'hidden');\n\t\t\treturn this;\n\t\t},\n\n\t\tisVisible: function() {\n\t\t\treturn (this.$el.style.display !== 'none') && Util.Styles.hasClass(this.$el, 'terminusjs-box');\n\t\t}\n\t};\n\n\treturn Prompt;\n});\n","/*!\n  * domready (c) Dustin Diaz 2012 - License MIT\n  */\n!function (name, definition) {\n  if (typeof module != 'undefined') module.exports = definition()\n  else if (typeof define == 'function' && typeof define.amd == 'object') define(definition)\n  else this[name] = definition()\n}('domready', function (ready) {\n\n  var fns = [], fn, f = false\n    , doc = document\n    , testEl = doc.documentElement\n    , hack = testEl.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , addEventListener = 'addEventListener'\n    , onreadystatechange = 'onreadystatechange'\n    , readyState = 'readyState'\n    , loaded = /^loade|c/.test(doc[readyState])\n\n  function flush(f) {\n    loaded = 1\n    while (f = fns.shift()) f()\n  }\n\n  doc[addEventListener] && doc[addEventListener](domContentLoaded, fn = function () {\n    doc.removeEventListener(domContentLoaded, fn, f)\n    flush()\n  }, f)\n\n\n  hack && doc.attachEvent(onreadystatechange, fn = function () {\n    if (/^c/.test(doc[readyState])) {\n      doc.detachEvent(onreadystatechange, fn)\n      flush()\n    }\n  })\n\n  return (ready = hack ?\n    function (fn) {\n      self != top ?\n        loaded ? fn() : fns.push(fn) :\n        function () {\n          try {\n            testEl.doScroll('left')\n          } catch (e) {\n            return setTimeout(function() { ready(fn) }, 50)\n          }\n          fn()\n        }()\n    } :\n    function (fn) {\n      loaded ? fn() : fns.push(fn)\n    })\n})"],"sourceRoot":""}