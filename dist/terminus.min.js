!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.terminus=e():t.terminus=e()}(window,function(){return function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";var s;void 0===(s=function(){var t=function(){this.__listeners={}};return t.prototype={on:function(t,e,n){this.__listeners[t]||(this.__listeners[t]=[]),e||console.error("events.on(): The listener doesn't exist"),this.__listeners[t].push(e.bind(n||this))},emit:function(){var t,e=Array.prototype.slice.call(arguments);if(0===arguments.length&&console.error("Events.emit(): Incorrect number of parameters"),t=arguments[0],this.__listeners[t]){e.shift();for(var n=this.__listeners[t].length;n--;)this.__listeners[t][n].apply(null,e)}}},t}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(){return{String:{htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},htmlStrip:function(t){return String(t).replace(/&/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},Array:{merge:function(){for(var t=[],e=0;e<arguments.length;e++)for(var n=arguments[e],s=0;s<n.length;s++)-1===t.indexOf(n[s])&&t.push(n[s]);return t}},Styles:{hasClass:function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}}}}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=Array.prototype.slice;function n(){this._ondone=[],this._onerror=[],this._onprogress=[],this._state="unfulfilled",this._args=null}function s(t,e){setTimeout(function(){if("function"==typeof t)return t.apply(null,e);for(var n=0,s=t.length;n<s;n++)t[n].apply(null,e)},0)}function i(t){switch(t){case"unfulfilled":return!0;case"canceled":return!1;case"fulfilled":throw new Error("Promise is done");case"failed":throw new Error("Promise is failed");default:throw new Error("Invalid promise state "+t)}}function r(t,n,s,i,r){n.then(function(){if(i[s]=!0,r[s]=e.call(arguments),t.isOpen()){for(var n=i.length;n--;)if(!i[n])return;t.done.apply(t,r)}},function(){t.isOpen()&&t.fail.apply(t,arguments)})}return n.prototype={constructor:n,done:function(t){i(this._state)&&(this._state="fulfilled",this._args=e.call(arguments),s(this._ondone,this._args))},fail:function(t){if(i(this._state)){if(this._state="failed",0===this._onerror.length)throw new Error("Promise failed without handler.");this._args=e.call(arguments),s(this._onerror,this._args)}},progress:function(t){if(!this.isCanceled())for(var e=0,n=this._onprogress.length;e<n;e++)this._onprogress[e].apply(null,arguments)},onDone:function(t){return"function"==typeof t&&(this.isDone()?s(t,this._args):this._ondone.push(t)),this},onFail:function(t){return"function"==typeof t&&(this.isFailed()?s(t,this._args):this._onerror.push(t)),this},onProgress:function(t){return"function"==typeof t&&this._onprogress.push(t),this},then:function(t,e,n){return this.onDone(t),this.onFail(e),this.onProgress(n),this},cancel:function(){this._state="canceled"},isCanceled:function(){return"canceled"===this._state},isDone:function(){return"fulfilled"===this._state},isFailed:function(){return"failed"===this._state},isOpen:function(){return"unfulfilled"===this._state}},"function"==typeof Base&&(n=Base.extend(n.prototype)),n.done=function(){var t=new n;return t.done.apply(t,arguments),t},n.failed=function(){var t=new n;return t.fail.apply(t,arguments),t},n.parallel=function(t){var s=new n,i=[],o=[];arguments.length>1&&(t=e.call(arguments));var u=o.length=t.length;if(0===u)return n.done();for(var l=0;l<u;l++)r(s,t[l],l,o,i);return s},n.serial=function(t){var s=new n;return arguments.length>1&&(t=e.call(arguments)),0===t.length?n.done():(function(t,e,s,i){if(s===e.length)return t.done.apply(t,i);var r=e[s].apply(null,i);r instanceof n?r.then(function(){nextSecuencial(t,e,s+1,arguments)},function(e){t.fail.apply(t,arguments)}):nextSecuencial(t,e,s+1,[r])}(s,t,0,[]),s)},n}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(0),s=n(1),i=function(t){var n=this;for(var s in this.settings={editable:!1},t)t.hasOwnProperty(s)&&(this.settings[s]=t[s]);this.events=new e,this.$el=document.createElement("div"),this.$el.className="terminusjs-input",this.$el.innerHTML="",this.settings.editable&&(this.$el.contentEditable=!0,this.$el.addEventListener("keydown",function(t){switch(t.keyCode){case 13:t.preventDefault(),t.stopPropagation(),n.events.emit("enter",n)}}))};return i.prototype={get value(){var t=this.$el.innerText||this.$el.textContent,e=t?t.replace(/\n/g,""):"";return e=e.replace(/^\s+|\s+$/g,"")},set value(t){return this.$el.innerHTML=t,this.focus(),this},set editable(t){t=!!t,this.settings.editable=t,this.$el.contentEditable=t},get editable(){return this.settings.editable},appendTo:function(t){return t.appendChild(this.$el),this},focus:function(){return this.$el.focus(),this.placeCursorToEnd(),this.events.emit("focus",this),this},clear:function(){return this.value="",this},isVisible:function(){return"none"!==this.$el.style.display&&s.Styles.hasClass(this.$el,"terminusjs-box")},placeCursorToEnd:function(){var t,e;return document.createRange&&((t=document.createRange()).selectNodeContents(this.$el),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)),this}},i}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e,s=n(0),i=n(2),r=n(5),o={list:[],register:function(t){return t instanceof e||console.error("Trying to register a non Process object"),this.list.push(t),this.list.length-1}};return(e=function(t){this.pid=o.register(this),this.events=new s,this.streams=t,this.bus=e.bus,this._promise=new i}).bus=new s,e.prototype={pid:null,bus:null,_promise:null,toString:function(){return"[Process:"+this.pid+"]"},read:function(){return this.streams.stdin.read()},write:function(t,e){var n;"string"==typeof(e=e||"stdout")&&(e=e.toLowerCase()),e instanceof r?n=e:"stdin"!==e&&(n=this.streams[e]),n?n.write(t):console.error(this.toString()+" Method write(): The target '"+e+"' is not a valid stream")},exit:function(t){this._promise.done(t)},exec:function(t,e){return"function"!=typeof t&&(console.error(this.toString+": Could not execute process because the given command is not a function"),this.exit(1)),t.apply(this,e),this._promise}},e}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(0),s=function(){this.events=new e,this.close=!1,this._buffer=[],this.writer=function(t){this._buffer.push(t)}};return s.prototype={events:null,set close(t){this._close||(!0===t&&this.events.emit("close"),this._close=!!t)},get close(){return this._close},set writer(t){this._writer=t},get writer(){return this._writer},write:function(t){this.close||(t+="",this.events.emit("write",t),this._writer.call(this,t))}},s}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(7),s=function t(n,s){var i=this;this.shell=s.shell||new t.Shell,this.shell&&this.shell instanceof t.Shell?(s.shell=this.shell,e(function(){n="string"==typeof n?document.querySelector(n):n,i.display=new t.Display(n,s)})):console.error("Terminus.constructor: Provided shell not valid")};return s.prototype={set shell(t){this._shell||(this._shell=t)},get shell(){return this._shell},set display(t){this._display||(this._display=t)},get display(){return this._display}},s.version="0.6",s.Display=n(8),s.Shell=n(12),s.Process=n(4),s}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;
/*!
  * domready (c) Dustin Diaz 2012 - License MIT
  */t.exports=function(t){var e,n=[],s=document,i=s.documentElement,r=i.doScroll,o=/^loade|c/.test(s.readyState);function u(t){for(o=1;t=n.shift();)t()}return s.addEventListener&&s.addEventListener("DOMContentLoaded",e=function(){s.removeEventListener("DOMContentLoaded",e,!1),u()},!1),r&&s.attachEvent("onreadystatechange",e=function(){/^c/.test(s.readyState)&&(s.detachEvent("onreadystatechange",e),u())}),t=r?function(e){self!=top?o?e():n.push(e):function(){try{i.doScroll("left")}catch(n){return setTimeout(function(){t(e)},50)}e()}()}:function(t){o?t():n.push(t)}}()},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(0),s=n(2),i=n(1),r=n(9),o=n(3),u=n(10),l=function(t,n){var s=this;for(var o in t||(this.$el=document.createElement("div"),document.body.appendChild(this.$el)),this.events=new e,n)n.hasOwnProperty(o)&&(this.settings[o]=n[o]);this.$el=t,i.Styles.addClass(this.$el,"terminusjs"),this.output=new u,this.output.appendTo(this.$el),this.prompt=new r({editable:!0}),this.prompt.appendTo(this.$el).show(),this.prompt.events.on("enter",this.enter,this),this.prompt.events.on("historyBack",this.historyBack,this),this.prompt.events.on("historyForward",this.historyForward,this),this.prompt.events.on("autocomplete",this.autocomplete,this),this.prompt.events.on("focus",function(){},this),this._currentInput=this.prompt.input,this.$el.addEventListener("keydown",function(t){t.ctrlKey&&90===t.keyCode&&s.cancel()}),this.output.print(this.settings.welcome,"web"),this.showPrompt(),t.addEventListener("click",function(){s.focus()}),this.settings.shell&&this.connectShell(this.settings.shell),this._historyIndex=0};return l.prototype={_shell:null,_historyIndex:0,_currentInput:null,settings:{welcome:"<p>Terminus.js<br/>Copyright 2011-2013 Ramón Lamana.</p>"},focus:function(){this._currentInput.focus()},historyReset:function(){this._historyIndex=this._shell.history.length},historyBack:function(){this._historyIndex--;var t=this._shell.history[this._historyIndex];t?this.prompt.input.value=t:this._historyIndex=0},historyForward:function(){this._historyIndex++;var t=this._shell.history[this._historyIndex];t?this.prompt.input.value=t:this.historyReset()},showPrompt:function(t){this.prompt.input.clear(),void 0!==t&&(this.prompt.input.value=t),this.prompt.show(),this.prompt.input.focus(),this.events.emit("prompt")},idle:function(){this.prompt.hide(),this.$el.focus()},cancel:function(){this.prompt.show(),this._currentInput=this.prompt.input,this.focus()},enter:function(t){var e=t.value,n=new s,i=this;this._printPrompt(),this.idle(),n.then(function(){i.showPrompt()}),""!==e?(this._shell&&this._shell.exec(e).then(function(){n.done()}),this.historyReset()):n.done()},autocomplete:function(t){var e=this._shell.search(t.value);e.length>1?(this._printPrompt(),this.output.print(e.join(" "),"stdout"),this.showPrompt(t.value)):1===e.length&&this.showPrompt(e[0])},connectShell:function(t){var e=t.streams;this._shell=t,e.stdout.events.on("write",function(t){this.output.print(t,"stdout")},this),e.stderr.events.on("write",function(t){this.output.print(t,"stderr")},this),e.web.events.on("write",function(t){this.output.print(t,"web")},this),this._shell.bus.on("clear",this.output.clear,this.output),e.stdin.reader=this.reader.bind(this),this.historyReset()},reader:function(t){var e=new o({editable:!0});this._currentInput=e,e.appendTo(this.$el).focus(),e.events.on("enter",function(e){var n=e.value;t.done(n),this.output.print(n),e.editable=!1,this.$el.removeChild(e.$el),this._currentInput=this.prompt.input},this)},_printPrompt:function(){var t=new r;t.ps=this.prompt.ps,t.input.value=this.prompt.input.value,t.show(),this.output.print(t.$el.outerHTML,"web")}},l}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(0),s=n(1),i=n(3),r=function(t){var n=this;for(var s in this.settings={editable:!1,ps:">"},t)t.hasOwnProperty(s)&&(this.settings[s]=t[s]);this.events=new e,this.$el=document.createElement("div"),this.$el.className="terminusjs-prompt",this.$el.className+=" terminusjs-box",this.$ps=document.createElement("div"),this.$ps.className="terminusjs-ps",this.$el.appendChild(this.$ps),this.input=new i(t),this.input.appendTo(this.$el),this.settings.editable&&this.input.$el.addEventListener("keydown",function(t){switch(t.keyCode){case 13:t.preventDefault(),t.stopPropagation(),n.events.emit("enter",n.input);break;case 38:n.events.emit("historyBack",n.input),t.preventDefault(),t.stopPropagation();break;case 40:n.events.emit("historyForward",n.input),t.preventDefault(),t.stopPropagation();break;case 9:n.events.emit("autocomplete",n.input),t.preventDefault(),t.stopPropagation()}}),this.ps=this.settings.ps};return r.prototype={set ps(t){return this.settings.prompt=t,this.$ps.innerHTML=t,this},get ps(){return this.settings.prompt},appendTo:function(t){return t.appendChild(this.$el),this},show:function(){return s.Styles.removeClass(this.$el,"hidden"),this},hide:function(){return s.Styles.addClass(this.$el,"hidden"),this},isVisible:function(){return"none"!==this.$el.style.display&&s.Styles.hasClass(this.$el,"terminusjs-box")}},r}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(1),s=n(11),i=function(){this.element=document.createElement("div"),this.element.className="terminusjs-output"};return i.prototype={print:function(t,n){var s;switch(n=n||"stdout"){case"stdout":s=this._print(e.String.htmlEntities(t).replace(/\n/g,"<br/>"),"terminusjs-stdout");break;case"stderr":s=this._print(e.String.htmlEntities(t).replace(/\n/g,"<br/>"),"terminusjs-stderr");break;case"web":s=this._print(t,"terminusjs-web")}return s.show(),this},clear:function(){this.element.innerHTML=""},appendTo:function(t){return t.appendChild(this.element),this},_print:function(t,e){var n=new s(e);return n.appendTo(this.element),n.setContent(t),n}},i}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(1),s=function(){var t,n=this.element=document.createElement("div");n.className="terminusjs-output-line",e.Styles.addClass(n,"animate"),(t=this.outputContent=document.createElement("div")).className="terminusjs-output-content",n.appendChild(t),window.scrollTo(0,document.body.scrollHeight)};return s.prototype={element:null,outputContent:null,appendTo:function(t){return t.appendChild(this.element),this},setContent:function(t){this.outputContent.innerHTML=t},show:function(){var t=this,n=function(){e.Styles.addClass(t.element,"visible"),t.element.style.height="auto"};n.call(this)},hide:function(){e.Styles.removeClass(this.element,"visible"),this.element.style.height="0"}},s}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(1),s=n(2),i=n(4),r=n(13),o=n(5),u=function(t){this._environment={},t&&this.include(t),this.streams={stdin:new r,stdout:new o,stderr:new o,web:new o},this.bus=i.bus,this.streams.stdin.id="STDIN",this.streams.stdout.id="STDOUT",this.commands=[],this.history=[]};return u.prototype={commands:null,streams:null,bus:null,history:null,_environment:null,getEnv:function(t){return this._environment[t]?this._environment[t]:null},exec:function(t){var e,n,u=[],l={stdin:this.streams.stdin,stdout:this.streams.stdout,stderr:this.streams.stderr,web:this.streams.web};return this.history.push(t),(n=this._parse(t)).forEach(function(t,h){var a,c;h<n.length-1?(l.stdout=new o,c=(new r).pipe(l.stdout)):(l.stdout=this.streams.stdout,c=null),a=function(n){if(this.native[t.name])return this.native[t.name].apply(this,t.args),s.done();for(var r=this.commands.length;r--;){if((e=this.commands[r])[t.name])return new i(n).exec(e[t.name],t.args)}return this.streams.stderr.write("Command '"+t.name+"' not found."),s.done()}.call(this,l),c&&(l.stdin=c),u.push(a)},this),s.parallel(u)},search:function(t){for(var n=[],s=[],i=this.commands.length;i--;)s=e.Array.merge(s,Object.keys(this.commands[i]));for(var r=new RegExp("^"+t,"i"),o=s.length;o--;)r.test(s[o])&&n.push(s[o]);return n},include:function(t){this.commands=this.commands.concat(t)},_parse:function(t){return t.split("|").map(function(t){var e=t.trim().split(" ");return t=e[0],e.shift(),{name:t,args:e}})},native:{history:function(){for(var t="",e=0,n=this.history.length;e<n;e++)t+=" "+e+": "+this.history[e]+"\n";this.streams.stdout.write(t)},clear:function(){this.bus.emit("clear")}}},u}.call(e,n,e,t))||(t.exports=s)},function(t,e,n){"use strict";var s;void 0===(s=function(t){var e=n(2),s=n(0),i=function(){this.events=new s,this._buffer=[],this.reader=function(t){var e=this._buffer.join("");this._buffer=[],t.done(e)}};return i.prototype={events:null,read:function(){var t=new e;return this._reader.call(this,t),this.events.emit("read"),t},set reader(t){this._reader=t},get reader(){return this._reader},pipe:function(t){var e=this;return t.writer=function(t){e._buffer.push(t)},this}},i}.call(e,n,e,t))||(t.exports=s)}])});